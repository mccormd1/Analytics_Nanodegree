---
title: "Diamonds EDA"
author: "Devin McCormack"
date: "1/23/2018"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Diamonds EDA

This is an exploration of the diamonds dataset, which is embedded in the ggplot library.

```{r diamonds}
library(ggplot2)
summary(diamonds)
length(diamonds$carat)
length(diamonds)
```

## Quiz 1: 
there are 53940 observations of 10 variables. There are three ordered factors (cut, color, clarity) with the best color being "D"

## Quiz 2:
a price histogram
```{r Price Histogram}
ggplot(data=diamonds,aes(x=price))+
  geom_histogram()

```

## Quiz 3: describe the shape and center of the distribution

```{r price descriptions}
mean(diamonds$price)
median(diamonds$price)
```

The distribution has a long right tail with a mean of $3932.80 and a median of $2401.


## Quiz 4: Diamond counts

How many diamonds cost less than $500?
How many diamonds cost less than $250?
How many diamnods cost $15,000 or more?

```{r price counts}
sum(diamonds$price<500)
sum(diamonds$price<250)
sum(diamonds$price>=15000)
```
# Explore the largest peak in the price histogram you created earlier.

Try limiting the x-axis, altering the bin width, and setting different breaks on the x-axis.

There wonâ€™t be a solution video for this question so go to the discussions to share your thoughts and discover what other people find.

You can save images by using the ggsave() command. ggsave() will save the last plot created. For example...
                qplot(x = price, data = diamonds)
                ggsave('priceHistogram.png')

```{r explore the peak}
ggplot(data=diamonds,aes(x=price))+
  geom_histogram(binwidth=50)+
  coord_cartesian(xlim=c(250,2500))
```
## Break out histograms by cut


```{r histogram by cut}
ggplot(data=diamonds,aes(x=price))+
  geom_histogram(binwidth=50)+
  facet_wrap(~cut)
```

## Price by cut

Which has the highest priced diamond?
Which has the lowest priced diamond?
Which has the lowest median price?

```{r}
by(diamonds$price,diamonds$cut,max)
by(diamonds$price,diamonds$cut,min)
by(diamonds$price,diamonds$cut,median)
```
Which has the highest priced diamond? premium
Which has the lowest priced diamond? Premium and Ideal
Which has the lowest median price? Ideal


## Scales for multiple histograms


In the last exercise, we looked at the summary statistics for diamond price by cut. If we look at the output table, the the median and quartiles are reasonably close to each other.


This means the distributions should be somewhat similar,
but the histograms we created don't show that.

The 'Fair' and 'Good' diamonds appear to have 
different distributions compared to the better
cut diamonds. They seem somewhat uniform
on the left with long tails on the right.

Let's look in to this more.

Look up the documentation for facet_wrap in R Studio.
Then, scroll back up and add a parameter to facet_wrap so that
the y-axis in the histograms is not fixed. You want the y-axis to
be different for each histogram.

```{r price per cut}
ggplot(data=diamonds,aes(x=price))+
  geom_histogram(binwidth=50)+
  facet_wrap(~cut,scales='free')
```
## create histogram of price per carat faceted by cut

```{r price per carat by cut}
ggplot(data=diamonds,aes(x=price/carat))+
  geom_histogram()+
  scale_x_log10()+
  facet_wrap(~cut,scales='free')
```

# Investigate the price of diamonds using box plots, numerical summaries, and one of the following categorical variables: cut, clarity, or color.

```{r boxplot of diamond price per carat over colors}
ggplot(data=diamonds,aes(x=color,y=price/carat))+
  geom_boxplot()
by(diamonds$price,diamonds$color,summary)
```


## Inter quartile range IQR

```{r interquartile ranges of color prices}
summary(subset(diamonds,color=='D')$price)
summary(subset(diamonds,color=='J')$price)

IQR(subset(diamonds,color=='D')$price)
IQR(subset(diamonds,color=='J')$price)

```
# Investigate the price per carat of diamonds across the different colors of diamonds using boxplots.


```{r price per carat over colors}
ggplot(data=diamonds,aes(x=price/carat))+
  geom_histogram()+
  scale_x_log10()+
  facet_wrap(~color,scales='free',nrow=3)
```

## carat frequency

```{r carat frequency}
ggplot(data=diamonds,aes(x=carat))+
  geom_freqpoly(binwidth=.01)
```
