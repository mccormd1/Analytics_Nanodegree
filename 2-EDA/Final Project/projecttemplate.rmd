TITLE by YOUR_NAME_HERE
========================================================

<!-- > **Tip**: You will see quoted sections like this throughout the template to -->
<!-- help you construct your report. Make sure that you remove these notes before -->
<!-- you finish and submit your project! -->

<!-- > **Tip**: One of the requirements of this project is that your code follows -->
<!-- good formatting techniques, including limiting your lines to 80 characters or -->
<!-- less. If you're using RStudio, go into Preferences \> Code \> Display to set up -->
<!-- a margin line to help you keep track of this guideline! -->

```{r echo=FALSE, message=FALSE, warning=FALSE, packages}
# Load all of the packages that you end up using in your analysis in this code
# chunk.

# Notice that the parameter "echo" was set to FALSE for this code chunk. This
# prevents the code from displaying in the knitted HTML output. You should set
# echo=FALSE for all code chunks in your file, unless it makes sense for your
# report to show the code that generated a particular plot.

# The other parameters for "message" and "warning" should also be set to FALSE
# for other code chunks once you have verified that each plot comes out as you
# want it to. This will clean up the flow of your report.
library(tidyverse)

```

```{r echo=FALSE, Load_the_Data}
# Load the Data
wine<-read.csv('wineQualityReds.csv')

summary(wine)
```

This dataset tabulates the physicochemical properties, as well
as subjective quality (1-10) of 1599 red wines  from: 
P. Cortez, A. Cerdeira, F. Almeida, T. Matos and J. Reis.
Modeling wine preferences by data mining from physicochemical properties.
In Decision Support Systems, Elsevier, 47(4):547-553. ISSN: 0167-9236.

The specific wine variety tested is a Portuguese wine called "Vinho Verde".
There are 11 attributes of these wines mearued with physicochemical tests,
most measurements in grams (or milligrams) per liter. Exceptions are pH, which 
is a scale, and alcohol, which is given in percentage by volume.

These 11 attributes are measured in an attempt to model a "quality" score.
Here quality is a median of at least 3 evaluations made by wine experts.
Wine Quality is a complete sensory score influenced by the wine tasting process,
which is generally laid out in the five "S" steps:

1. See - the visual color and clarity of the wine is judged. This is not
directly related to any of our measured components.

2. Swirl - the density, related to alcohol and residual sugar is noted.

3. Sniff - the "nose" of the wine is most important. From here a judge can 
assess the fermentation (acetic acid), alcohol, preservatives (sulfur dioxide),
and exotic aromas (citric acid and others) of a wine.

4. Sip - tasting the wine allows a judge to assess sweetness (residual sugar),
tartness (acids and pH), salts (chlorides), and alcohol content. Additionally,
various elements of smells change with temperature. Interestingly, a key 
component of taste is usually bitterness or tannin level, but the data does
not reflect that this was physicochemically measured.

5. Savor - the aftertaste of the wine more completely assesses alcohol and 
bitterness, as well as less volatile aromatics.

Now into data cleaning!

## Data cleaning

Based on the summary output there are two things I might want to change: 
first dropping the unnecessary X column, and changing quality to a factor. 

One thing worth noting right now is that the quality range isn't 1-10. 
There are no absolutely terrible or perfect red wines in this list.

At this point it is important to note the units of these measurements. 
All input variables besides pH, density, sulfur dioxides, and alcohol are 
in g/dm^3, aka grams per liter. Density is in g/cm^3, or grams per milliliter. 
This can be converted to g/dm^3 by multiplying by 1000. Alcohol is given in 
percent by volume. Knowing that the density of pure ethanol is 789 g/dm^3, we 
can also convert percent into g/dm^3. Both sulfur dioxide measurements are in 
mg/dm^3, so we can divide by 1000 to get it into grams.

Finally, pH is a base 10 scale of acidity. The different acids measured 
(i.e. tartaric, acetic, citric) have different acidity levels based on 
concentrations and other components in the water. The sum of these components 
should be negatively correlated with pH.

```{r echo=FALSE, Explore and clean data}

wine<-select(wine,-X)
wine$quality<-as.factor(wine$quality)

wine%>%
  mutate(density=density*1000,
         alcoholgperL=alcohol*7.89,
         free.sulfur.dioxide=free.sulfur.dioxide/1000,
         total.sulfur.dioxide=total.sulfur.dioxide/1000)->wine

head(wine)
```

# Univariate Plots Section

## Quality Distribution

First a quick look at what we are trying to model, the quality score of the wine.
<!-- > **Tip**: In this section, you should perform some preliminary exploration of -->
<!-- your dataset. Run some summaries of the data and create univariate plots to -->
<!-- understand the structure of the individual variables in your dataset. Don't -->
<!-- forget to add a comment after each plot or closely-related group of plots! -->
<!-- There should be multiple code chunks and text sections; the first one below is -->
<!-- just to help you get started. -->

```{r echo=FALSE, Univariate_Plots, quality distribution}
ggplot(data=wine,aes(x=quality))+
  geom_bar()+
  scale_y_log10()

```

Here we see the distribution of the quality ratings. Once again, this shows that
there is really a constricted range of values; all wines are rated 3-8, not 1-10. 
Note that the y axis of data is also plotted on log10 scale. This is because
there is an order of magnitude less wines at the extremes than in the middle.
It is rare for wines to be much better or worse than average.

## Acids

Acids are important to wine, and the type and amount of acidity affects the
smell, sip, and savor steps of winetasting.

```{r echo=FALSE, Univariate_Plots, total acids}
p.fixed<-ggplot(data=wine,aes(x=fixed.acidity,))+
  geom_histogram(binwidth = .5,aes(color=I('gray'),fill=I('mediumpurple')))
p.volatile<-ggplot(data=wine,aes(x=volatile.acidity,))+
  geom_histogram(binwidth = .05,aes(color=I('gray'),fill=I('tomato')))
p.citric<-ggplot(data=wine,aes(x=citric.acid,))+
  geom_histogram(binwidth = .025,aes(color=I('gray'),fill=I('limegreen')))
p.pH<-ggplot(data=wine,aes(x=pH,))+
  geom_histogram(binwidth = .05,aes(color=I('gray'),fill=I('aquamarine')))

grid.arrange(p.fixed,p.volatile,p.citric,p.pH,ncol=1)

```

Noteworthy are that all the wines have some amount of fixed acidity and volatile
acidity, but not all wines have citric acid. Also noteworthy is the different
scales of these graphs. Fixed acid is a measure of tartaric acid, which is a
product of grapes - it makes sense that wine from grapes has a lot of it. 
Volatile acid is acetic acid, a component of vinegar, which is a byproduct of 
fermentation. Since wine is fermented, we expect some level of acetic acid, but
no one wants particularly vinegary wine. Citric acid is related to citrus fruit,
and is rarer to find in wine. However it is noted to be a pleasant addition.
pH shows a fairly gaussian distribution, indicating that the total acidity is
fairly normal, and centered around a range that similar to that of grapes.
Later it will be worth looking at how correlated these variables are.


## Density

Density is a major component of both swirling and sipping, and therefore may be
a big factor in quality.

```{r echo=FALSE, Univariate_Plots, density}
ggplot(data=wine,aes(x=density))+
geom_histogram(binwidth=1,color=I('gray'),fill=I('cornflowerblue'))

```

The peak density is below 1000, meaning that in general, the wine is less dense 
that pure water. This makes sense, since alcohol has lower density than water
and it generally makes up ~10% of the volume.

## Alcohol content

Alcohol affects the swirl, sip, and savor components. Alcohol also has effects
on physiological conditions, and could influence scoring beyond the 5 "s" steps.

```{r echo=FALSE, Univariate_Plots, Alcohol content}
ggplot(data=wine,aes(x=alcohol))+
geom_histogram(binwidth=.5,color=I('gray'),fill=I('cornflowerblue'))

```

This data shows that most of the wines have between 9 and 11% alcohol by volume,
and there seems to be a positive skew.

## Residual sugar content

Sugar affects see, sip, and savor.

```{r echo=FALSE, Univariate_Plots, Sugar content}
ggplot(data=wine,aes(x=residual.sugar))+
geom_histogram(binwidth=.5,color=I('gray'),fill=I('cornflowerblue'))

```

Most wines fall below 4 g/L, indicating that this wine type is likely a dry wine.
There is a long right tail, but all are significantly less than the threshold
for a sweet wine, 45g/L. The fermentation process converts sugar to alcohol, so
it would be reasonable that, if starting sugar was constant, that alcohol and 
residual sugar would have a negative correlation.

## Sulfur Dioxide (preservatives)

Sulfur Dioxide (SO2) is a preservative of wine, and can affect the sniff and sip. 
Too little preservatives can lead to spoiled wine, however it is unlikely that 
any of the tested wines were spoiled. Too much can give a sulfur taste, which
is almost universally a bad taste for wine.


```{r echo=FALSE, Univariate_Plots, SO2 content}

p.free<-ggplot(data=wine,aes(x=free.sulfur.dioxide,))+
  geom_histogram(bins=30,aes(color=I('gray'),fill=I('lightgoldenrod')))+
  scale_x_log10()
p.total<-ggplot(data=wine,aes(x=total.sulfur.dioxide,))+
  geom_histogram(bins=50,aes(color=I('gray'),fill=I('goldenrod')))+
  scale_x_log10()
p.sulphates<-ggplot(data=wine,aes(x=sulphates,))+
  geom_histogram(bins=50,aes(color=I('gray'),fill=I('darkgoldenrod')))+
  scale_x_log10()

grid.arrange(p.free,p.total,p.sulphates,ncol=3)

```

We see all three graphs have a right skew, that is normalized by scaling x log10.
All of these should be correlated, as total SO2 includes free SO2, and increased
sulphates increases SO2.

## Chlorides (salt)

It is unclear how much this affects quality, as I've never had a "salty" wine, 
but it can potentially manifest as a mineral, metallic, or savory taste, and 
influence texture - both components of sip.

```{r echo=FALSE, Univariate_Plots, Salt content}
ggplot(data=wine,aes(x=chlorides))+
geom_histogram(binwidth=.01,color=I('gray'),fill=I('cornflowerblue'))

```

There appears to be a normal distribution near .1g/L, with a very long right
tail.

<!-- > **Tip**: Make sure that you leave a blank line between the start / end of -->
<!-- each code block and the end / start of your Markdown text so that it is -->
<!-- formatted nicely in the knitted text. Note as well that text on consecutive -->
<!-- lines is treated as a single space. Make sure you have a blank line between -->
<!-- your paragraphs so that they too are formatted for easy readability. -->

# Univariate Analysis

Generally, we see that features are normal with a right skew, with density being
an exception with no discernable skew. The main feature, quality, shows that 
exceptional wines (both bad and good) are very uncommon. This can be due to
the aggregation of the quality score (median of 3 or more tastes),
psychological mean reversion due to contrast of qualitative measurements over
time, or just a overall small difference between wines of this variety.

### What is the structure of your dataset?

Data is structured where each row is a single bottle of Vihno Verde wine. There
is no information about grape variety, vintage, winery, brand, or price. 
Each wine has physicochemical measurements as well as a median aggregated 
measure of quality from 3+ tastings by wine experts.

### What is/are the main feature(s) of interest in your dataset?

The main feature of interest is quality, and we are using the rest of the
features to try and model quality. 

### What other features in the dataset do you think will help support your \
investigation into your feature(s) of interest?

The features of most interest to me are features that predominately affect 
sniff, or multiple of the five "S" steps of tasting. These include alcohol, 
sugar, acids, and sulfur dioxide.

### Did you create any new variables from existing variables in the dataset?

I created a new alcohol variable to turn percent volume into g/L, but it is 
still linearly related to alcohol, so it is not neccessarily a new variable in
terms of linear regression.

### Of the features you investigated, were there any unusual distributions? \
Did you perform any operations on the data to tidy, adjust, or change the form \
of the data? If so, why did you do this?

I converted features, when possible, to all have the same units of g/L. Due to 
a right skew, many of the features can be scaled with log10, however I didn't
convert the raw numbers to log10 scale at this time.

# Bivariate Plots Section

> **Tip**: Based on what you saw in the univariate plots, what relationships
between variables might be interesting to look at in this section? Don't limit
yourself to relationships between a main output feature and one of the
supporting variables. Try to look at relationships between supporting variables
as well.

```{r echo=FALSE, Bivariate_Plots}

```

# Bivariate Analysis

> **Tip**: As before, summarize what you found in your bivariate explorations
here. Use the questions below to guide your discussion.

### Talk about some of the relationships you observed in this part of the \
investigation. How did the feature(s) of interest vary with other features in \
the dataset?

### Did you observe any interesting relationships between the other features \
(not the main feature(s) of interest)?

### What was the strongest relationship you found?


# Multivariate Plots Section

> **Tip**: Now it's time to put everything together. Based on what you found in
the bivariate plots section, create a few multivariate plots to investigate
more complex interactions between variables. Make sure that the plots that you
create here are justified by the plots you explored in the previous section. If
you plan on creating any mathematical models, this is the section where you
will do that.

```{r echo=FALSE, Multivariate_Plots}

```

# Multivariate Analysis

### Talk about some of the relationships you observed in this part of the \
investigation. Were there features that strengthened each other in terms of \
looking at your feature(s) of interest?

### Were there any interesting or surprising interactions between features?

### OPTIONAL: Did you create any models with your dataset? Discuss the \
strengths and limitations of your model.

------

# Final Plots and Summary

> **Tip**: You've done a lot of exploration and have built up an understanding
of the structure of and relationships between the variables in your dataset.
Here, you will select three plots from all of your previous exploration to
present here as a summary of some of your most interesting findings. Make sure
that you have refined your selected plots for good titling, axis labels (with
units), and good aesthetic choices (e.g. color, transparency). After each plot,
make sure you justify why you chose each plot by describing what it shows.

### Plot One
```{r echo=FALSE, Plot_One}

```

### Description One


### Plot Two
```{r echo=FALSE, Plot_Two}

```

### Description Two


### Plot Three
```{r echo=FALSE, Plot_Three}

```

### Description Three

------

# Reflection

> **Tip**: Here's the final step! Reflect on the exploration you performed and
the insights you found. What were some of the struggles that you went through?
What went well? What was surprising? Make sure you include an insight into
future work that could be done with the dataset.

> **Tip**: Don't forget to remove this, and the other **Tip** sections before
saving your final work and knitting the final report!